# 設定アプリ

設定アプリは、診断チャートを登録するためのアプリである。設定アプリのSPAは、React/TypeScript+viteでsetting_app/に実装する。



## 画面と画面遷移

| 画面名           | 役割                                                         | 遷移先           |
| ---------------- | ------------------------------------------------------------ | ---------------- |
| チャート一覧画面 | 保存済みのチャートの名前一覧を表示する。各行には、削除ボタンを表示する。また表の右上には、新規登録ボタンを配置する | 新規登録画面     |
| 新規登録画面     | CSVアップロードのdropzoneを表示する。CSVが入力されたら、保存ボタンをactiveにする。保存ボタンでサーバに登録してチャート一覧画面に戻る。また、戻るボタンは内容を破棄して、チャート一覧画面に戻る | チャート一覧画面 |



## チャート一覧画面

チャート一覧画面では、バックエンドサーバに`/api/charts`のGETメッセージを送り、チャート一覧を取得する。受信する情報は、IChart型データのJSON文字列の配列である（つまり、string[]型で、各要素がJSON文字列になっている）。なお、チャート一覧が空の場合は、チャート未登録である旨を表示する。

受信データをIChart型オブジェクトに変換して、一覧表を表示する。



## 新規登録画面

新規登録画面では、CSVがdropzoneにdropされると、簡単なフォーマットチェックを実施する。チェックは、chart.mdの仕様に沿っているかを確認する。フォーマット違反があればエラーを表示する。dropzoneには何度でもファイルをdropでき、dropされるたびにフォーマットチェックを行う。なお、CSVファイルの設問パートや診断結果パートのカンマの数が規定よりも少ない場合は、空文字のカラムがあるものとみなしてデータを読み込む。

また、CSVファイルをIChart型のチャート情報に変換し、どのようなチャートが登録されようとしているかを確認できるようにする。数が多すぎる場合は、5件でトランケート表示して、クリックすると全体が展開表示されるようにする。

保存ボタンが押下されると、以下の処理を行う。

1. バックエンドサーバの`/api/register`にIChart型のチャート情報を送信する

